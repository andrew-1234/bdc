
R version 4.2.1 (2022-06-23) -- "Funny-Looking Kid"
Copyright (C) 2022 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(testthat)
> library(bdc)
The legacy packages maptools, rgdal, and rgeos, underpinning the sp package,
which was just loaded, will retire in October 2023.
Please refer to R-spatial evolution reports for details, especially
https://r-spatial.org/r/2023/05/15/evolution4.html.
It may be desirable to make the sf package available;
package maintainers should consider adding sf to Suggests:.
The sp package is now running under evolution status 2
     (status 2 uses the sf package in place of rgdal)
> 
> test_check("bdc")

bdc_basisOfRecords_notStandard:
Flagged 4 of the following specific nature:
 c("FOSSIL_SPECIMEN", NA, "Specimen", "PRESERVED_SPECIMEN") 
One column was added to the database.


bdc_basisOfRecords_notStandard:
Flagged 2 of the following specific nature:
 c("FOSSIL_SPECIMEN", "RON") 
One column was added to the database.

Loading required package: rnaturalearth
Support for Spatial objects (`sp`) will be deprecated in {rnaturalearth} and will be removed in a future release of the package. Please use `sf` objects with {rnaturalearth}. For example: `ne_download(returnclass = 'sf')`
Spherical geometry (s2) switched off
The rnaturalearthhires package needs to be installed.
Installing the rnaturalearthhires package.
Downloading GitHub repo ropensci/rnaturalearthhires@HEAD
sp (2.0-0 -> 2.1-3) [CRAN]
Installing 1 packages: sp
Installing package into '/home/lucasjardim/Documents/bdc/check/bdc.Rcheck'
(as 'lib' is unspecified)
trying URL 'https://cloud.r-project.org/src/contrib/sp_2.1-3.tar.gz'
Content type 'application/x-gzip' length 1244605 bytes (1.2 MB)
==================================================
downloaded 1.2 MB

* installing *source* package ‘sp’ ...
** package ‘sp’ successfully unpacked and MD5 sums checked
** using staged installation
** libs
gcc -I"/usr/share/R/include" -DNDEBUG      -fpic  -g -O2 -fdebug-prefix-map=/build/r-base-asoVQd/r-base-4.2.1=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c Rcentroid.c -o Rcentroid.o
gcc -I"/usr/share/R/include" -DNDEBUG      -fpic  -g -O2 -fdebug-prefix-map=/build/r-base-asoVQd/r-base-4.2.1=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c gcdist.c -o gcdist.o
gcc -I"/usr/share/R/include" -DNDEBUG      -fpic  -g -O2 -fdebug-prefix-map=/build/r-base-asoVQd/r-base-4.2.1=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c init.c -o init.o
gcc -I"/usr/share/R/include" -DNDEBUG      -fpic  -g -O2 -fdebug-prefix-map=/build/r-base-asoVQd/r-base-4.2.1=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c pip.c -o pip.o
gcc -I"/usr/share/R/include" -DNDEBUG      -fpic  -g -O2 -fdebug-prefix-map=/build/r-base-asoVQd/r-base-4.2.1=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c pip2.c -o pip2.o
gcc -I"/usr/share/R/include" -DNDEBUG      -fpic  -g -O2 -fdebug-prefix-map=/build/r-base-asoVQd/r-base-4.2.1=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c sp_xports.c -o sp_xports.o
gcc -I"/usr/share/R/include" -DNDEBUG      -fpic  -g -O2 -fdebug-prefix-map=/build/r-base-asoVQd/r-base-4.2.1=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c surfaceArea.c -o surfaceArea.o
gcc -I"/usr/share/R/include" -DNDEBUG      -fpic  -g -O2 -fdebug-prefix-map=/build/r-base-asoVQd/r-base-4.2.1=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2  -c zerodist.c -o zerodist.o
gcc -shared -L/usr/lib/R/lib -Wl,-Bsymbolic-functions -Wl,-z,relro -o sp.so Rcentroid.o gcdist.o init.o pip.o pip2.o sp_xports.o surfaceArea.o zerodist.o -L/usr/lib/R/lib -lR
installing to /home/lucasjardim/Documents/bdc/check/bdc.Rcheck/00LOCK-sp/00new/sp/libs
** R
** data
** demo
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** checking absolute paths in shared objects and dynamic libraries
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (sp)

The downloaded source packages are in
	'/tmp/RtmpILmCAI/downloaded_packages'
── R CMD build ─────────────────────────────────────────────────────────────────
* checking for file ‘/tmp/RtmpILmCAI/remotes20a907cb972f5/ropensci-rnaturalearthhires-dd1e210/DESCRIPTION’ ... OK
* preparing ‘rnaturalearthhires’:
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* building ‘rnaturalearthhires_1.0.0.9000.tar.gz’

Installing package into '/home/lucasjardim/Documents/bdc/check/bdc.Rcheck'
(as 'lib' is unspecified)
* installing *source* package ‘rnaturalearthhires’ ...
** using staged installation
** R
** data
*** moving datasets to lazyload DB
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (rnaturalearthhires)
dist is assumed to be in decimal degrees (arc_degrees).
although coordinates are longitude/latitude, st_intersection assumes that they
are planar

bdc_coordinates_country_inconsistent:
Flagged 0 records.
One column was added to the database.

dist is assumed to be in decimal degrees (arc_degrees).
although coordinates are longitude/latitude, st_intersection assumes that they
are planar

bdc_coordinates_country_inconsistent:
Flagged 2 records.
One column was added to the database.

dist is assumed to be in decimal degrees (arc_degrees).
although coordinates are longitude/latitude, st_intersection assumes that they
are planar

bdc_coordinates_country_inconsistent:
Flagged 2 records.
One column was added to the database.

dist is assumed to be in decimal degrees (arc_degrees).
although coordinates are longitude/latitude, st_intersection assumes that they
are planar

bdc_coordinates_country_inconsistent:
Flagged 1 records.
One column was added to the database.


bdc_coordinates_empty:
Flagged 4 records.
One column was added to the database.


bdc_coordinates_empty:
Flagged 4 records.
One column was added to the database.


bdc_coordinates_empty:
Flagged 4 records.
One column was added to the database.


bdc_coordinates_from_locality 
Found 3 records missing or with invalid coordinates but with potentially useful information on locality.


bdc_coordinates_outOfRange:
Flagged 2 records.
One column was added to the database.

bdc_coordinates_precision:
Flagged 4 records
One column was added to the database.

bdc_coordinates_precision:
Flagged 0 records
One column was added to the database.

Loading required package: readr

Attaching package: 'readr'

The following objects are masked from 'package:testthat':

    edition_get, local_edition

Loading required package: rnaturalearthdata

Attaching package: 'rnaturalearthdata'

The following object is masked from 'package:rnaturalearth':

    countries110

Correcting latitude and longitude transposed

3 occurrences will be tested
Processing occurrences from: BO (1)
Processing occurrences from: BR (2)

bdc_coordinates_transposed:
Corrected 3 records.
One columns were added to the database.


bdc_scientificName_empty:
Flagged 5 records.
One column was added to the database.


bdc_coordinates_empty:
Flagged 44 records.
One column was added to the database.


bdc_coordinates_outOfRange:
Flagged 1 records.
One column was added to the database.


bdc_basisOfRecords_notStandard:
Flagged 0 of the following specific nature:
 character(0) 
One column was added to the database.


bdc_country_from_coordinates:
Country names were added to 27 records.

Loading auxiliary data: country names

Standardizing country names

country found: Bolivia
country found: Brazil

bdc_country_standardized:
The country names of 65 records were standardized.
Two columns ('country_suggested' and 'countryCode') were added to the database.

Correcting latitude and longitude transposed

15 occurrences will be tested
Processing occurrences from: BR (15)
No latitude and longitude were transposed

Loading auxiliary data: country names

Standardizing country names

country found: Bolivia
country found: Brazil

bdc_country_standardized:
The country names of 3 records were standardized.
Two columns ('country_suggested' and 'countryCode') were added to the database.

3 occurrences will be tested
Processing occurrences from: BO (1)
Processing occurrences from: BR (2)

bdc_country_from_coordinates:
Country names were added to 2 records.


bdc_country_from_coordinates:
Country names were added to 4 records.

Loading required package: cowplot
Loading required package: rworldmap
Loading required package: sp
Failed with error:  'Package 'sp' version 2.0.0 cannot be unloaded:
 Error in unloadNamespace(package) : namespace 'sp' is imported by 'rnaturalearth', 'geosphere', 'rnaturalearthhires', 'raster', 'rnaturalearthdata', 'rworldmap' so cannot be unloaded
'
Loading required package: ggplot2
Loading required package: hexbin
Loading required package: DT

bdc_eventDate_empty:
Flagged 3 records.
One column was added to the database.


bdc_fiter_out_flags:
The following columns were removed from the database:
.bdc_scientificName_empty, .bdc_coordinates_empty, .bdc_coordinates_outOfRange, .summary

bdc_fiter_out_flags:
The following columns were removed from the database:
.summary

bdc_coordinates_empty:
Flagged 0 records.
One column was added to the database.


bdc_scientificName_empty:
Flagged 2 records.
One column was added to the database.


bdc_scientificName_empty:
Flagged 2 records.
One column was added to the database.

country found: United States of America
country found: Vietnam
country found based on iso3: United States of America
Standardizing datafake1 file
Standardizing datafake2 file
Standardizing datafake3 file
Standardizing datafake1 file
Standardizing datafake2 file
Standardizing datafake3 file
[ERROR]: Column names defined in the metadata do not match column names in the datafake4 file
[INFO]: Column(s) `y` and `notes` defined in the metadata not present in the datafake4

bdc_summary_col:
Flagged 4 records.
One column was added to the database.


bdc_year_from_eventDate:
Four-digit year were extracted from 5 records.


bdc_year_outOfRange:
Flagged 1 records.
One column was added to the database.

[ FAIL 0 | WARN 2 | SKIP 5 | PASS 89 ]

══ Skipped tests ═══════════════════════════════════════════════════════════════
• On CRAN (5)

[ FAIL 0 | WARN 2 | SKIP 5 | PASS 89 ]
No deferred expressions to run
> 
> proc.time()
   user  system elapsed 
 66.817   1.584  73.541 
